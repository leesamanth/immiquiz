<!DOCTYPE html>
<html lang="en" ng-app="quizApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>US Citizenship Quiz - Random 10 Questions</title>
    <meta
      name="description"
      content="Practice US citizenship test questions and answers. Review flashcards, take quizzes, and prepare for your naturalization interview with immiquiz.com."
    />
    <meta
      name="keywords"
      content="US citizenship, quiz, flashcards, naturalization, practice test, immigration, civics, questions, answers"
    />
    <meta name="author" content="immiquiz.com" />
    <meta
      property="og:title"
      content="US Citizenship Quiz - Practice Questions & Flashcards"
    />
    <meta
      property="og:description"
      content="Practice US citizenship test questions and answers. Review flashcards, take quizzes, and prepare for your naturalization interview with immiquiz.com."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://immiquiz.com/" />
    <meta property="og:image" content="https://immiquiz.com/images/logo2.svg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="US Citizenship Quiz - Practice Questions & Flashcards"
    />
    <meta
      name="twitter:description"
      content="Practice US citizenship test questions and answers. Review flashcards, take quizzes, and prepare for your naturalization interview with immiquiz.com."
    />
    <meta
      name="twitter:image"
      content="https://immiquiz.com/images/logo2.svg"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-DZ4QLE2QX7"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #fff;
        font-family: sans-serif;
      }
      .card {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        padding: 2rem 3rem;
        margin-bottom: 2rem;
        text-align: center;
      }
      .quiz-question {
        background-color: #0056b3;
        width: 100%;
        min-height: 86px;
        font-size: 14px;
        color: rgb(255, 255, 255);
        font-weight: bold;
        padding: 30px 60px;
        border-bottom-right-radius: 20px;
        border-top-left-radius: 20px;
      }
      .btn {
        background: #0056b3;
        color: #fafafa;
        border: 1px solid #0056b3;
        border-radius: 8px;
        padding: 0.5rem 1.5rem;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.2s;
        margin: 0.5rem;
      }

      .ans-btn {
        -webkit-appearance: none;
        border: solid 2px rgb(161, 161, 161);
        background-color: transparent;
        border-radius: 8px;
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        cursor: pointer;
        transition: 0.5s;
      }

      .circle {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: #fff;
        border: 2px solid #666;
        color: #040404;
        text-align: center;
        font-weight: bold;
        font-size: 1.1rem;
        margin-right: 10px;
      }

      .answer-btn {
        border: solid 2px rgb(161, 161, 161);
        background-color: transparent;
        border-radius: 8px;
        top: 0;
        left: 0;
        width: 100%;
        cursor: pointer;
        transition: 0.5s;
        background: #fafafa;
        color: #020202;
        padding: 0.5rem 1.5rem;
        font-size: 1.2rem;
        font-weight: 900;
        margin: 0.5rem;
        text-align: left;
      }
      .answer-btn.selected {
        background: #00b356;
        font-weight: bold;
      }
      .answer-btn.correct {
        background: #28a745;
      }
      .answer-btn.incorrect {
        background: #dc3545;
      }
      .submit-btn {
        background: #28a745;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 0.5rem 1.5rem;
        font-size: 1rem;
        cursor: pointer;
        margin-top: 1rem;
      }
      .result {
        font-size: 1.2rem;
        margin-top: 1rem;
      }
    </style>
  </head>
  <body>
    <div class="container mx-auto px-4 py-0" ng-controller="QuizController">
      <div class="header">
        <nav class="flex items-center justify-between p-4 bg-white">
          <div class="flex items-center space-x-8">
            <!-- Hamburger button for mobile, now left-aligned -->
            <button
              title="Toggle menu"
              class="md:hidden mr-2 focus:outline-none"
              ng-click="menuOpen = !menuOpen"
            >
              <svg
                class="w-8 h-8 text-gray-700"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path>
              </svg>
            </button>
            <img
              src="images/logo2.svg"
              alt="Immigration Quiz Logo"
              class="logo"
            />
            <!-- Menu for desktop -->
            <ul class="hidden md:flex space-x-6">
              <li><a href="index.html" class="font-bold text-lg"> Home </a></li>
              <li>
                <a href="store.html" class="font-bold text-lg"> Store </a>
              </li>
              <li>
                <a href="about.html" class="font-bold text-lg"> About </a>
              </li>
            </ul>
          </div>
          <!-- Mobile drawer -->
          <div
            ng-show="menuOpen"
            class="md:hidden absolute top-16 left-0 w-full bg-white shadow-lg z-50"
          >
            <ul class="flex flex-col items-center py-4 space-y-2">
              <li>
                <a
                  href="index.html"
                  class="font-bold text-lg block w-full px-4 py-2"
                >
                  Home
                </a>
              </li>
              <li>
                <a
                  href="store.html"
                  class="font-bold text-lg block w-full px-4 py-2"
                >
                  Store
                </a>
              </li>
              <li>
                <a
                  href="about.html"
                  class="font-bold text-lg block w-full px-4 py-2"
                >
                  About
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </div>
      <div class="mx-auto px-4 py-8 flex flex-col md:flex-row">
        <main class="flex-1 min-w-0">
          <div class="container mx-auto px-4 py-8">
            <div class="flex justify-end mb-4">
              <label class="flex items-center space-x-2">
                <input
                  type="checkbox"
                  ng-model="readOutEnabled"
                  ng-change="onReadOutToggle()"
                  class="accent-blue-600"
                />
                <span class="inline-flex items-center">
                  <span ng-if="readOutEnabled">
                    <!-- Speaker On Icon -->
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-5 w-5 text-green-600 mr-1"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M11 5L6 9H2v6h4l5 4V5z"
                      />
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M19 12c0-1.657-1.343-3-3-3m0 6c1.657 0 3-1.343 3-3z"
                      />
                    </svg>
                  </span>
                  <span ng-if="!readOutEnabled">
                    <!-- Speaker Off Icon -->
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-5 w-5 text-gray-400 mr-1"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M11 5L6 9H2v6h4l5 4V5z"
                      />
                      <line
                        x1="19"
                        y1="5"
                        x2="5"
                        y2="19"
                        stroke="currentColor"
                        stroke-width="2"
                      />
                    </svg>
                  </span>
                  <span class="text-sm"
                    >{{ readOutEnabled ? 'Unmute' : 'Mute' }}</span
                  >
                </span>
              </label>
            </div>
            <div class="card" ng-if="!quizFinished && !selection.selectedState">
              <h2 class="text-2xl font-bold mb-4">
                Select Your State or Territory
              </h2>
              <div class="flex justify-center">
                <select
                  title="Select State or Territory"
                  class="border rounded px-3 py-2 w-64"
                  ng-model="selection.selectedState"
                  ng-options="st as st.name for st in combinedStatesTerritories track by st.abbreviation"
                >
                  <option value="">-- Select State or Territory --</option>
                </select>
              </div>
            </div>
            <div class="card" ng-if="!quizFinished && selection.selectedState">
              <div ng-if="currentQuestion">
                <h2 class="text-xl font-bold mb-2">
                  Question {{ currentIndex + 1 }} of {{ totalQuestions }}
                </h2>
                <div class="mb-2 quiz-question">
                  {{ currentQuestion.question }}
                </div>
                <div class="mb-4 text-sm text-gray-600">
                  Please read your answer outloud
                </div>
                <button
                  class="btn"
                  ng-if="!showAnswers"
                  ng-click="revealAnswers()"
                >
                  Select Answer(s)
                </button>
                <form ng-if="showAnswers">
                  <div
                    class="flex flex-col items-center mb-4 w-full max-w-full"
                  >
                    <button
                      type="button"
                      ng-repeat="option in currentOptions"
                      ng-class="{
                      'answer-btn': true,
                      selected: isSelected(option),
                    }"
                      ng-click="toggleSelect(option)"
                    >
                      <span class="circle">{{ alphabet[$index] }}</span> {{
                      option }}
                    </button>
                  </div>
                  <button type="button" class="btn" ng-click="submitAnswer()">
                    Submit Answer
                  </button>
                </form>
              </div>
            </div>
            <div class="card" ng-if="quizFinished">
              <h2 class="text-2xl font-bold mb-2">Quiz Complete!</h2>
              <div class="result">
                You answered {{ score }} out of {{ totalQuestions }} questions
                correctly.
              </div>
              <button class="answer-btn mt-4" ng-click="restartQuiz()">
                Restart Quiz
              </button>
              <a href="index.html" class="answer-btn mt-4">Back to Home</a>
            </div>
          </div>
        </main>
        <aside
          class="w-full md:w-1/3 md:pl-8 mt-8 md:mt-0 max-h-160 overflow-y-scroll"
        >
          <div class="card">
            <h3 class="text-lg font-bold mb-2">Answered Questions</h3>
            <div ng-if="answeredQuestions.length === 0" class="text-gray-500">
              No questions answered yet.
            </div>
            <ul class="text-left">
              <li
                ng-repeat="aq in answeredQuestions"
                class="mb-4 border-b pb-2 align-baseline"
              >
                <div class="font-semibold">
                  Q{{ aq.index + 1 }}: {{ aq.question.question }}
                </div>
                <div class="text-sm">
                  Result:
                  <span
                    ng-class="{
                    'text-green-600': aq.isCorrect,
                    'text-red-600': !aq.isCorrect,
                  }"
                  >
                    {{ aq.isCorrect ? 'Correct' : 'Incorrect' }}
                  </span>
                </div>
                <div class="text-sm mt-1">
                  Selected Answer(s):
                  <span class="font-semibold">
                    {{ aq.selected.join(', ') || 'None' }}
                  </span>
                </div>
                <button
                  class="answer-btn mt-2"
                  ng-click="aq.showReview = !aq.showReview"
                >
                  {{ aq.showReview ? 'Hide Review' : 'Review Answers' }}
                </button>
                <div ng-if="aq.showReview" class="mt-2 text-left">
                  <div class="font-bold">Possible Answers:</div>
                  <ul class="list-disc ml-6">
                    <li ng-repeat="ans in aq.allAnswers">{{ ans }}</li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </aside>
      </div>
    </div>
    <script>
      angular
        .module("quizApp", [])
        .controller("QuizController", function ($scope, $http, $timeout) {
          $scope.questions = [];
          $scope.quizQuestions = [];
          $scope.currentIndex = 0;
          $scope.currentQuestion = null;
          $scope.currentOptions = [];
          $scope.selectedOptions = [];
          $scope.showAnswers = false;
          $scope.quizFinished = false;
          $scope.score = 0;
          $scope.answeredQuestions = [];
          $scope.readOutEnabled = false;
          $scope.totalQuestions = 10;
          $scope.states = [];
          $scope.territories = [];
          $scope.combinedStatesTerritories = [];
          $scope.governors = [];
          $scope.capitals = [];
          $scope.congressByState = [];
          $scope.selection = {
            selectedState: null,
          };
          $scope.alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");

          $scope.onReadOutToggle = function () {
            if (
              $scope.readOutEnabled &&
              $scope.currentQuestion &&
              $scope.currentQuestion.question
            ) {
              $timeout(function () {
                speak($scope.currentQuestion.question);
              }, 100);
            } else {
              if (window.speechSynthesis) window.speechSynthesis.cancel();
            }
          };

          $http.get("questions.json").then(
            function (response) {
              // Flatten all questions from all sections
              var allQuestions = [];
              if (Array.isArray(response.data)) {
                response.data.forEach(function (q) {
                  allQuestions.push(q);
                });
                $scope.questions = allQuestions;
                startQuiz();
              } else {
                $scope.questions = [];
                $scope.quizFinished = true;
                alert("Error: questions.json is not in the expected format.");
              }
            },
            function (error) {
              $scope.questions = [];
              $scope.quizFinished = true;
              alert("Error loading questions.json");
            }
          );

          // Load states and territories, then combine
          $http.get("states.json").then(
            function (response) {
              $scope.states = response.data;
              $http.get("territories.json").then(
                function (resp) {
                  $scope.territories = resp.data;
                  $scope.combinedStatesTerritories = $scope.states.concat(
                    $scope.territories
                  );
                },
                function () {
                  $scope.combinedStatesTerritories = $scope.states;
                }
              );
            },
            function () {
              $scope.combinedStatesTerritories = [];
            }
          );

          $http.get("governors.json").then(
            function (response) {
              $scope.governors = response.data;
              if (!$scope.governors || $scope.governors.length === 0) {
                console.log("No governors available");
              }
            },
            function (error) {
              $scope.governors = [];
            }
          );

          $http.get("capitals.json").then(
            function (response) {
              $scope.capitals = response.data;
              if (!$scope.capitals || $scope.capitals.length === 0) {
                console.log("No capitals available");
              }
            },
            function (error) {
              $scope.capitals = [];
            }
          );

          $http.get("members.json").then(
            function (response) {
              $scope.congressByState = response.data;
              if (
                !$scope.congressByState ||
                $scope.congressByState.length === 0
              ) {
                console.log("No congress data available");
              }
            },
            function (error) {
              $scope.congressByState = [];
              console.log("Error loading members.json");
            }
          );

          function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
          }

          function speak(text) {
            if ("speechSynthesis" in window) {
              var voices = window.speechSynthesis.getVoices();
              var utter = new SpeechSynthesisUtterance(text);
              // Alternate between male and female voices
              if (!$scope.voiceToggle) $scope.voiceToggle = false;
              var genderVoices = voices.filter(function (v) {
                return v.lang.startsWith("en") && (v.gender ? true : true);
              });
              var femaleVoice = genderVoices.find(function (v) {
                return (
                  v.name.toLowerCase().includes("female") ||
                  v.voiceURI.toLowerCase().includes("female") ||
                  v.name.toLowerCase().includes("woman")
                );
              });
              var maleVoice = genderVoices.find(function (v) {
                return (
                  v.name.toLowerCase().includes("male") ||
                  v.voiceURI.toLowerCase().includes("male") ||
                  v.name.toLowerCase().includes("man")
                );
              });
              if ($scope.voiceToggle && femaleVoice) {
                utter.voice = femaleVoice;
              } else if (!$scope.voiceToggle && maleVoice) {
                utter.voice = maleVoice;
              }
              $scope.voiceToggle = !$scope.voiceToggle;
              window.speechSynthesis.cancel();
              window.speechSynthesis.speak(utter);
            }
          }

          function startQuiz() {
            $scope.quizQuestions = shuffle($scope.questions.slice()).slice(
              0,
              $scope.totalQuestions
            );
            /*   var additional = $scope.questions.filter((q) => q.requiresState);
            additional.forEach((q) => {
              $scope.quizQuestions.push(q);
            });
            $scope.totalQuestions = $scope.quizQuestions.length; */
            //test case
            /*   var oneQuestion = $scope.quizQuestions.filter(
              (e) =>
                e.question && e.question.toLowerCase().includes("name three")
            );
            if (oneQuestion.length > 0) {
              $scope.quizQuestions = oneQuestion;
              $scope.totalQuestions = oneQuestion.length;
            } */
            //test case ends
            $scope.currentIndex = 0;
            $scope.score = 0;
            $scope.quizFinished = false;
            loadQuestion();
          }

          function loadQuestion() {
            $scope.currentQuestion = $scope.quizQuestions[$scope.currentIndex];
            $scope.showAnswers = false;
            $scope.selectedOptions = [];
            // Combine answerOptions and answers
            var opts = [];
            if (!$scope.currentQuestion.requiresState) {
              if (
                $scope.currentQuestion &&
                Array.isArray($scope.currentQuestion.answerOptions)
              ) {
                opts = $scope.currentQuestion.answerOptions.map(function (o) {
                  return o.answerText;
                });
              }
              if (
                $scope.currentQuestion &&
                Array.isArray($scope.currentQuestion.answers)
              ) {
                opts = opts.concat($scope.currentQuestion.answers);
              }
            } else {
              // if the question requires a state. get actual values based on chamber
              if (
                $scope.currentQuestion.chamber &&
                $scope.selection.selectedState
              ) {
                if ($scope.currentQuestion.chamber === "Governor") {
                  var gov = $scope.governors.find(
                    (g) =>
                      g.statecode ===
                      $scope.selection.selectedState.abbreviation
                  );
                  console.log(gov);
                  if (gov && gov.governorsname) opts.push(gov.governorsname);
                } else if ($scope.currentQuestion.chamber === "Capital") {
                  var cap = $scope.capitals.find(
                    (c) =>
                      c.abbreviation ===
                      $scope.selection.selectedState.abbreviation
                  );
                  console.log(cap);
                  if (cap && cap.capitalCity) opts.push(cap.capitalCity);
                } else if ($scope.currentQuestion.chamber === "Senate") {
                  console.log("Senate chamber");
                  var stateData = $scope.congressByState.filter(
                    (c) =>
                      c.statecode ===
                      $scope.selection.selectedState.abbreviation
                  )[0];
                  console.log(stateData);
                  stateData.senators.forEach(function (m) {
                    if (m) opts.push(m);
                  });
                } else if (
                  $scope.currentQuestion.chamber === "House of Representatives"
                ) {
                  console.log("House chamber");
                  var members = $scope.congressByState.filter(
                    (c) =>
                      c.statecode ===
                      $scope.selection.selectedState.abbreviation
                  )[0].representatives;
                  console.log(members);
                  members.forEach(function (m) {
                    if (m) opts.push(m);
                  });
                }
              }
            }
            // Remove duplicates
            $scope.currentOptions = shuffle(Array.from(new Set(opts)));
            // Analyze question for selection type
            var qText = ($scope.currentQuestion.question || "").toLowerCase();

            if (qText.includes("select all")) {
              $scope.selectionType = "all";
              $scope.maxSelections = $scope.currentQuestion.answers.length;
            } else if (qText.includes("name three")) {
              $scope.selectionType = "three";
              $scope.maxSelections = 3;
            } else if (
              qText.includes("select two") ||
              qText.includes("what are two") ||
              qText.includes("name two")
            ) {
              $scope.selectionType = "two";
              $scope.maxSelections = 2;
            } else {
              $scope.selectionType = "single";
              $scope.maxSelections = 1;
            }
            // Read out question if enabled
            $timeout(function () {
              if (
                $scope.readOutEnabled &&
                $scope.currentQuestion &&
                $scope.currentQuestion.question
              ) {
                speak($scope.currentQuestion.question);
              }
            }, 300);
          }

          $scope.isSelected = function (option) {
            return $scope.selectedOptions.indexOf(option) !== -1;
          };

          $scope.toggleSelect = function (option) {
            if ($scope.isSelected(option)) {
              $scope.selectedOptions = $scope.selectedOptions.filter(function (
                o
              ) {
                return o !== option;
              });
            } else {
              if ($scope.selectionType === "single") {
                $scope.selectedOptions = [option];
              } else if ($scope.selectionType === "two") {
                if ($scope.selectedOptions.length < 2) {
                  $scope.selectedOptions.push(option);
                }
              } else if ($scope.selectionType === "three") {
                if ($scope.selectedOptions.length < 3) {
                  $scope.selectedOptions.push(option);
                }
              } else if ($scope.selectionType === "all") {
                if ($scope.selectedOptions.length < $scope.maxSelections) {
                  $scope.selectedOptions.push(option);
                }
              }
            }
          };

          $scope.submitAnswer = function () {
            var correct = $scope.currentQuestion.answers || [];
            var selected = $scope.selectedOptions;

            if ($scope.currentQuestion.requiresState) {
              correct = [];
              if ($scope.currentQuestion.chamber === "Governor") {
                var gov = $scope.governors.find(
                  (g) =>
                    g.statecode === $scope.selection.selectedState.abbreviation
                );
                if (gov && gov.governorsname) correct.push(gov.governorsname);
              } else if ($scope.currentQuestion.chamber === "Capital") {
                var cap = $scope.capitals.find(
                  (c) =>
                    c.abbreviation ===
                    $scope.selection.selectedState.abbreviation
                );
                if (cap && cap.capitalCity) correct.push(cap.capitalCity);
              } else if ($scope.currentQuestion.chamber === "Senate") {
                var stateData = $scope.congressByState.filter(
                  (c) =>
                    c.statecode === $scope.selection.selectedState.abbreviation
                )[0];
                stateData.senators.forEach(function (m) {
                  if (m) correct.push(m);
                });
              } else if (
                $scope.currentQuestion.chamber === "House of Representatives"
              ) {
                var members = $scope.congressByState.filter(
                  (c) =>
                    c.statecode === $scope.selection.selectedState.abbreviation
                )[0].representatives;
                members.forEach(function (m) {
                  if (m) correct.push(m);
                });
              }
            }

            // Mark correct only if selectedOptions equal to scope.maxSelections and selectedOptions are all in correct answers
            var isCorrect =
              selected.length === $scope.maxSelections &&
              selected.every(function (s) {
                return correct.indexOf(s) !== -1;
              });

            if (isCorrect) $scope.score++;

            // Save answered question to aside
            var reviewAnswers = Array.isArray($scope.currentQuestion.answers)
              ? $scope.currentQuestion.answers.slice()
              : [];

            if ($scope.currentQuestion.requiresState) {
              reviewAnswers = correct.slice();
            }

            $scope.answeredQuestions.push({
              index: $scope.currentIndex,
              question: $scope.currentQuestion,
              isCorrect: isCorrect,
              selected: selected.slice(),
              allAnswers: reviewAnswers,
              showReview: false,
            });
            $scope.currentIndex++;
            if ($scope.currentIndex < $scope.totalQuestions) {
              loadQuestion();
            } else {
              $scope.quizFinished = true;
            }
          };

          $scope.revealAnswers = function () {
            $scope.showAnswers = true;
          };

          $scope.restartQuiz = function () {
            $scope.answeredQuestions = [];
            startQuiz();
          };
        });
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-DZ4QLE2QX7");
    </script>
  </body>
</html>
